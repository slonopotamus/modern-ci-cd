= Modern CI/CD
–ú–∞—Ä–∞—Ç –†–∞–¥—á–µ–Ω–∫–æ <https://github.com/slonopotamus[@slonopotamus]>
v1.0, 2021-08-03
:source-highlighter: highlightjs
:revealjs_hash: true
:revealjs_theme: league
:revealjsdir: https://cdn.jsdelivr.net/npm/reveal.js@3.9.2
:icons: font
:imagesdir: images

**{revdate}**

== –ü–æ–∫–æ–ª–µ–Ω–∏—è CI

. Jenkins (2005), Teamcity (2006)
. AppVeyor (2011), Travis CI (2011), GitLab CI (2015)
. CircleCI (2017), GitHub Actions (2018)

=== 1: Jenkins, Teamcity

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ UI
* Installation-wide –∞–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞
* –ù–µ–ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å
* –ë–∏–ª–¥—ã –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ

=== 2: AppVeyor, Travis CI, GitLab CI

* –î–∏—Å–∫–∞–≤–µ—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
* Configuration as a code
* –ü—Ä–∞–≤–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤/–ø—Ä–æ–µ–∫—Ç–æ–≤
* –í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã

=== 3: CircleCI, GitHub Actions

* –í—Å—ë —á—Ç–æ –µ—Å—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–º –ø–æ–∫–æ–ª–µ–Ω–∏–∏
* –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–∏–ª–¥–æ–≤
* Actions/Orbs: —Ä–µ—é–∑–∞–±–µ–ª—å–Ω—ã–µ –∫—É—Å–∫–∏ –±–∏–ª–¥-–ø–∞–π–ø–ª–∞–π–Ω–∞

== Actions

[source,yaml]
----
steps:
- uses: actions/checkout@v2
- uses: ruby/setup-ruby@v1
  with:
    ruby-version: 2.6
- run: bundle exec rake
----

* –≠–∫—à–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
* Inputs
* –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
* Orbs: 2700+
* Actions: over 9000

=== –ö–µ–π—Å: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Slack

* Jenkins: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–∞–≥–∏–Ω (—á–µ—Ä–µ–∑ —Ä–µ—Å—Ç–∞—Ä—Ç, –∫–æ–Ω–µ—á–Ω–æ)
* GitLab CI: –≤—Ä—É–∫–æ–ø–∞—à–Ω—É—é –¥—ë—Ä–≥–∞—Ç—å HTTP API
* GitHub Actions:
[source,yaml]
----
- uses: slackapi/slack-github-action@v1.14.0
  with:
    channel-id: 'CHANNEL_ID'
    slack-message: 'hello!'
----

=== –ö–µ–π—Å: clang-format

* Jenkins: üòê
* GitLab CI: üòê
* GitHub Actions:
[source,yaml]
----
steps:
- uses: actions/checkout@v2
- uses: DoozyX/clang-format-lint-action@v0.12
  with:
    source: '.'
    exclude: './lib'
    clangFormatVersion: 12
----

== –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –≤–∏—Ä—Ç—É–∞–ª–∫–∏

* –ë–∏–ª–¥-–∞–≥–µ–Ω—Ç—ã *–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ*
* –û—Ç–º–µ–Ω–∞ –±–∏–ª–¥–æ–≤
* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Ñ—Ç–∞
* Autoscaling
* MacOS? –ù—É –¥–∞, –Ω—É –¥–∞, –ø–æ—à–µ–ª —è –Ω–∞—Ö–µ—Ä

== Continuous Deployment

* Kubernetes, Nomad
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ *—Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å* —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ç–µ–Ω–¥—ã
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Ä–∂-—Ä–µ–∫–≤–µ—Å—Ç–∞–º–∏

image::gitlab_environments.png[]

== Bonus: Windows Containers

image::win_in_win.png[]

–ü–æ–ª–æ–∂–∏–ª Windows –≤ Windows, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å Windows –ø–æ–∫–∞ —è –∑–∞–ø—É—Å–∫–∞—é Windows

=== –ò–∑–æ–ª—è—Ü–∏—è

* Process
* Hyper-V

=== –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

* –Ø–¥—Ä–æ, API
* Windows Server vs Desktop
* Windows 10 21H1
* Windows 11

=== –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

* LTSC
* SAC

=== –†–∞–∑–º–µ—Ä

* `mcr.microsoft.com/windows/servercore`: 5.7GB
* `mcr.microsoft.com/windows`: 15GB

== The End
